import shutil
import subprocess
import evdev


device = evdev.InputDevice('/dev/input/event7')  # Replace '7' with your mouse device path

alt_held = False

for event in device.read_loop():
    if event.type == evdev.ecodes.EV_KEY:                         # Check for key events (press/release)
        if event.code == evdev.ecodes.KEY_LEFTALT:                # Replace with another key if needed
            alt_held = event.value == 1                           # 1=pressed, 0=released
    if event.type == evdev.ecodes.EV_REL and alt_held:            # Check for relative events (like wheel) only if Alt is held
        if event.code == evdev.ecodes.REL_WHEEL:                  # Mouse wheel event
            if event.value > 0:
                change_volume("up")
            elif event.value < 0:
                change_volume("down")


def change_volume(direction):
    if shutil.which('wpctl'):
        cmd = ['wpctl', 'set-volume', '@DEFAULT_AUDIO_SINK@', '5%+' if direction == 'up' else '5%-']
    elif shutil.which('pactl'):
        cmd = ['pactl', 'set-sink-volume', '@DEFAULT_SINK@', '+5%' if direction == 'up' else '-5%']
    elif shutil.which('amixer'):
        cmd = ['amixer', 'set', 'Master', '5%+' if direction == 'up' else '5%-']
    else:
        print("No supported audio backend found.")
        return
    subprocess.run(cmd)


# This script listens for mouse wheel events while the Alt key is held down
# and adjusts the system volume accordingly using available audio backends.
    